
<!------------------------------------------------------->
<!--  HELPERS 									       -->
<!------------------------------------------------------->

{% macro notes(item) %}
    {% if item.isSetNotes() %}
        {{ item.notes_string.decode('utf-8') }}
    {% endif %}
{% endmacro %}

{% macro id(item) %}
    <td class="active">{{ item.id }}</td>
{% endmacro %}

{% macro sbo_term(item) %}
    {% if item.getSBOTerm() != -1 %}
        <a href="{{ item.getSBOTermAsURL() }}" target="_blank">{{ item.getSBOTermID() }}</a>
    {% else %}
        -
    {% endif %}
{% endmacro %}

{% macro annotation(item) %}
    {% if item.isSetAnnotation() %}
        {{ item|SBML_annotationToString }}
    {% else %}
        -
    {% endif %}
{% endmacro %}

{% macro math(item) %}
    {{ item.getMath|SBML_astnodeToString }}
{% endmacro %}

{% macro annotation_xml(item) %}
    {% if item.isSetAnnotation() %}
        <pre>{{ item.getAnnotationString().decode('utf-8') }}</pre>
    {% endif %}
{% endmacro %}

<!------------------------------------------------------->
<!--  MODEL 									       -->
<!------------------------------------------------------->
{% macro model(m) %}
	<tr><td class="active">id</td><td>{{ m.id }}</td></tr>
	<tr><td class="active">name</td><td>{{ m.name}}</td></tr>
	<tr><td class="active">version</td><td>L{{ m.level }}V{{ m.version }}</td></tr>
	<tr><td class="active">time</td><td>{{ m.time_units }}</td></tr>
	<tr><td class="active">substance</td><td>{{ m.substance_units }}</td></tr>
	<tr><td class="active">extent</td><td>{{ m.extent_units }}</td></tr>
	<tr><td class="active">volume</td><td>{{ m.volume_units }}</td></tr>
	<tr><td class="active">area</td><td>{{ m.area_units }}</td></tr>
	<tr><td class="active">length</td><td>{{ m.length_units }}</td></tr>
{% endmacro %}

<!------------------------------------------------------->
<!--  FUNCTION DEFINITIONS   						   -->
<!------------------------------------------------------->
{% macro function_header() %}
    <th scope="col" class="hidden">type</th>
	<th scope="col" class="warning">FunctionDefinitions [{{ functions_size }}]</th>
	<th scope="col">name</th>
	<th scope="col">math</th>
	<th scope="col">sbo</th>
	<th scope="col">cvterm</th>
{% endmacro %}

{% macro function_content(f) %}
    <td class="hidden">FunctionDefinition</td>
	<td>{{  macros.id(f) }}</td>
	<td>{{ f.name }}</td>
	<td>{{ f.getMath()|SBML_astnodeToString }}</td>
	<td>{{ macros.sbo_term(f) }}</td>
	<td>{{ macrose.annotation(f) }}</td>
{% endmacro %}

<!------------------------------------------------------->
<!--  UNIT DEFINITIONS       						   -->
<!------------------------------------------------------->
{% macro unit_header() %}
    <th scope="col" class="hidden">type</th>
	<th scope="col" class="warning">UnitDefinitions [{{ units_size }}]</th>
	<th scope="col">name</th>
	<th scope="col">units</th>
	<th scope="col">sbo</th>
	<th scope="col">cvterm</th>
{% endmacro %}

{% macro unit_content(ud) %}
    <td class="hidden">UnitDefinition</td>
	<td>{{ macros.id }}</td>
	<td>{{ ud.name }}</td>
	<td>{{ ud|SBML_unitDefinitionToString }}</td>
	<td>{{ macros.sbo_term(ud) }}</td>
	<td>{{ macros.annotation(ud) }}</td>
{% endmacro %}

<!------------------------------------------------------->
<!--  COMPARTMENTS          						   -->
<!------------------------------------------------------->
{% macro compartment_header() %}
    <th scope="col" class="hidden">type</th>
	<th scope="col" class="warning">Compartments [{{ compartments_size }}]</th>
	<th scope="col">name</th>
	<th scope="col">size</th>
	<th scope="col">constant</th>
	<th scope="col">spatial dimensions</th>
	<th scope="col">unit</th>
	<th scope="col">derived unit</th>
	<th scope="col">sbo</th>
	<th scope="col">cvterm</th>
{% endmacro %}

{% macro compartment_content(c) %}
    <td class="hidden">Compartment</td>
	<td>{{ macros.id }}</td>
	<td>{{ c.name }}</td>
	<td>{% if c.isSetSize() %}
            {{ c.size }}
        {% else %}
            {{ values|get_item:c.id}}
        {% endif %}
    </td>
	<td class="{% if c.constant %}success{% else %}danger{% endif %}">{{ c.constant }}</td>
	<td>{{ c.spatial_dimensions }}</td>
	<td>{{ c.units }}</td>
	<td>{{ c.getDerivedUnitDefinition()|SBML_unitDefinitionToString }}</td>
	<td>{{ macros.sbo_term(c) }}</td>
	<td>{{ macros.annotation(c) }}</td>
{% endmacro %}

<!------------------------------------------------------->
<!--  SPECIES                						   -->
<!------------------------------------------------------->
{% macro species_header() %}
    <th scope="col" class="hidden">type</th>
	<th scope="col" class="warning">Species [{{ species_size }}]</th>
	<th scope="col">name</th>
	<th scope="col">compartment</th>
	<th scope="col">boundary condition</th>
	<th scope="col">constant</th>
	<th scope="col">initial amount</th>
	<th scope="col">initial concentration</th>
	<th scope="col">substance units</th>
	<th scope="col">derived units</th>
	<th scope="col">sbo</th>
	<th scope="col">cvterm</th>
{% endmacro %}

{% macro species_content(s) %}
    <td class="hidden">Species</td>
	<td>{{ macros.id }}</td>
	<td>{{ s.name }}</td>
	<td>{{ s.compartment }}</td>
	<td class="{% if s.boundary_condition %} success {% else %}  danger  {% endif %}">{{ s.boundary_condition }}</td>
	<td class="{% if s.constant %} success {% else %} danger {% endif %}">{{ s.constant }}</td>
	<td>{% if s.isSetInitialAmount() %} {{ s.initial_amount }} {% endif %}</td>
	<td>{% if s.isSetInitialConcentration() %} {{ s.initial_concentration }} {% endif %}</td>
	<td>{{ s.substance_units }}</td>
	<td>{{ s.getDerivedUnitDefinition()|SBML_unitDefinitionToString }}</td>
	<td>{{ macros.sbo_term(s) }}</td>
	<td>{{ macros.annotation(s) }}</td>
{% endmacro %}

<!------------------------------------------------------->
<!--  PARAMETERS             						   -->
<!------------------------------------------------------->
{% macro parameter_header() %}
    <th scope="col" class="hidden">type</th>
	<th scope="col" class="warning">Parameters [{{ parameters_size }}]</th>
	<th scope="col">name</th>
	<th scope="col">value</th>
	<th scope="col">unit</th>
	<th scope="col">derived unit</th>
	<th scope="col">constant</th>
	<th scope="col">sbo</th>
	<th scope="col">cvterm</th>
{% endmacro %}

{% macro parameter_content(p) %}
    <td class="hidden">Parameter</td>
	<td>{{ macros.id(p) }}
	<td>{{ p.name }}</td>
	<td>{% if p.isSetValue() %}
            {{ p.value }}
        {% else %}
            {{ values|get_item:p.id }}
        {% endif %}
    </td>
	<td>{{ p.units }}</td>
	<td>{{ p.getDerivedUnitDefinition()|SBML_unitDefinitionToString }}</td>
	<td class="{% if p.constant %} success {% else %} danger {% endif %}">{{ p.constant }}</td>
	<td>{{ macros.sbo_term(p) }}</td>
	<td>{{ macros.annotation(p) }}</td>
{% endmacro %}

<!------------------------------------------------------->
<!--  INITIAL ASSIGNMENTS   						   -->
<!------------------------------------------------------->
{% macro assignment_header %}
    <th scope="col" class="hidden">type</th>
	<th scope="col" class="warning">InitialAssignments [{{ assignments_size }}]</th>
	<th scope="col">&nbsp;</th>
	<th scope="col">assignment</th>
	<th scope="col">derived units</th>
	<th scope="col">sbo</th>
	<th scope="col">cvterm</th>
{% endmacro %}
{% macro assignment_content %}
    <td class="hidden">InitialAssignment</td>
	{{ macros.id %}
	<td>=</td>
	<td>{{ macros.math %}</td>
	<td>{{ item.getDerivedUnitDefinition|SBML_unitDefinitionToString }}</td>
	<td>{{ macros.sbo_term %}</td>
	<td>{{ macros.annotation %}</td>
{% endmacro %}
<!------------------------------------------------------->
<!--  RULES  				   						   -->
<!------------------------------------------------------->
{% macro rule_header %}
    <th scope="col" class="hidden">type</th>
	<th scope="col" class="warning">Rules [{{ rules_size }}]</th>
	<th scope="col">&nbsp;</th>
	<th scope="col">assignment</th>
	<th scope="col">derived units</th>
	<th scope="col">sbo</th>
	<th scope="col">cvterm</th>
{% endmacro %}
{% macro rule_content %}
    <td class="hidden">Rule</td>
	{{ macros.id %}
	<td>=</td>
	<td>{{ macros.math %}</td>
	<td>{{ item.getDerivedUnitDefinition|SBML_unitDefinitionToString }}</td>
	<td>{{ macros.sbo_term %}</td>
	<td>{{ macros.annotation %}</td>
{% endmacro %}
<!------------------------------------------------------->
<!--  CONSTRAINTS			   						   -->
<!------------------------------------------------------->
{% macro constraint_header %}
    <th scope="col" class="hidden">type</th>
	<th scope="col" class="warning">Constraints [{{ constraints_size }}]</th>
	<th scope="col">constraint</th>
	<th scope="col">sbo</th>
	<th scope="col">cvterm</th>
{% endmacro %}
{% macro constraint_content %}
    <td class="hidden">Constraint</td>
		{{ macros.id %}
	<td>{{ macros.math %}</td>
	<td>{{ macros.sbo_term %}</td>
	<td>{{ macros.annotation %}</td>
{% endmacro %}
<!------------------------------------------------------->
<!--  REACTIONS 			   						   -->
<!------------------------------------------------------->
{% macro reaction_header %}
    <th scope="col" class="hidden">type</th>
	<th scope="col" class="warning">Reactions [{{ reactions_size }}]</th>
	<th scope="col">name</th>
	<th scope="col">reversibility</th>
	<th scope="col">equation</th>
	<th scope="col">modifiers</th>
	<th scope="col">derived units</th>
	<th scope="col">formula</th>
	<th scope="col">sbo</th>
	<th scope="col">cvterm</th>
{% endmacro %}
{% macro reaction_content %}
    <td class="hidden">Reaction</td>
	{{ macros.id %}
	<td>{{ item.name }}</td>
	{% if item.getReversible %}<td class="success">&lt;=&gt;</td>{% else %}
	<td class="danger">&nbsp;=&gt;</td>{% endif %}
	<td>{{item | SBML_reactionToString}}</td>
	<td>{% for mod in item.getListOfModifiers %}
						{{mod.getSpecies}}<br />
		 {% endfor %}</td>
	<td>{{item.getKineticLaw.getDerivedUnitDefinition|SBML_unitDefinitionToString}}</td>
	<td>{{item.getKineticLaw.getMath|SBML_astnodeToString}}</td>
	<td>{{ macros.sbo_term %}</td>
	<td>{{ macros.annotation %}</td>
{% endmacro %}
<!------------------------------------------------------->
<!--  EVENTS     			   						   -->
<!------------------------------------------------------->
{% macro event_header %}
    <th scope="col" class="hidden">type</th>
	<th scope="col" class="warning">Events [{{ events_size }}]</th>
	<th scope="col">name</th>
	<th scope="col">trigger</th>
	<th scope="col">priority</th>
	<th scope="col">delay</th>
	<th scope="col">assignments</th>
	<th scope="col">sbo</th>
	<th scope="col">cvterm</th>
{% endmacro %}
{% macro event_content %}
    <td class="hidden">Event</td>
	{{ macros.id %}
	<td>{{ item.name }}</td>
	<td>
	{{item.getTrigger.getMath|SBML_astnodeToString}}<br />
	initialValue = {{item.getTrigger.getInitialValue}}<br />
	persistent = {{item.getTrigger.getPersistent}}<br />
	</td>
	<td>{{item.getPriority}}</td>
	<td>{{item.getDelay}}</td>
	<td>{% for eva in item.getListOfEventAssignments %}
    		{{eva.getId}} = {{eva.getMath|SBML_astnodeToString}}<br />
    	{% endfor %}</td>
	<td>{{ macros.sbo_term %}</td>
	<td>{{ macros.annotation %}</td>
{% endmacro %}
