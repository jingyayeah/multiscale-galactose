<!doctype html> {% load staticfiles %}
{% load SBML_filters %}
<html lang="en">
<head>
	<link rel="stylesheet" type="text/css" href="{% static 'sim/stylesheets/report.css' %}" />
	<script type="text/javascript" src="{% static 'sim/js/jquery.js' %}"></script>
	<script type="text/javascript" src="{% static 'sim/js/jquery.dataTables.js' %}"></script>
	<script type="text/javascript" charset="utf-8">
			$(document).ready(function() {
			  $('#table_units').dataTable( {
        			"bPaginate": false,
        			"bLengthChange": false,
       				"bFilter": true,
        			"bSort": true,
        			"bInfo": false,
        			"bAutoWidth": false
    			});
			
			  $('#table_compartments').dataTable( {
        			"bPaginate": false,
        			"bLengthChange": false,
       				"bFilter": true,
        			"bSort": true,
        			"bInfo": false,
        			"bAutoWidth": false
    			});
			
				$('#table_species').dataTable( {
        			"bPaginate": false,
        			"bLengthChange": false,
       				"bFilter": true,
        			"bSort": true,
        			"bInfo": false,
        			"bAutoWidth": false
    			});
    			
    			$('#table_assignments').dataTable( {
        			"bPaginate": false,
        			"bLengthChange": false,
       				"bFilter": true,
        			"bSort": true,
        			"bInfo": false,
        			"bAutoWidth": false
    			});
    			
    			$('#table_parameters').dataTable( {
        			"bPaginate": false,
        			"bLengthChange": false,
       				"bFilter": true,
        			"bSort": true,
        			"bInfo": false,
        			"bAutoWidth": false
    			});
    			
    			$('#table_reactions').dataTable( {
        			"bPaginate": false,
        			"bLengthChange": false,
       				"bFilter": true,
        			"bSort": true,
        			"bInfo": false,
        			"bAutoWidth": false
    			}); 			
		} );
		</script>
		
		<!-- <meta http-equiv="refresh" content="20" /> -->
	<title>SBML Report: {{ model.getId }}</title>
</head>
<body>

<div id="menu">
<table>
<tr>

<td><h1>{{ model.getId }}</h1>
<a href="{{ sbml_model.file.url}}" target="_blank">SBML file</a>
</td>
<td><ul>
	{% if functions %} 
		<li><a href="#FunctionDefinitions">FunctionDefinitions</a></li>
	{% endif %}
	{% if unitDefinitions %}
		<li><a href="#UnitDefinitions">UnitDefinitions</a></li>
	{% endif %}
	{% if compartments %}
		<li><a href="#Compartments">Compartments</a></li>
	{% endif %}
	{% if species %}
		<li><a href="#Species">Species</a></li>
	{% endif %}
	{% if parameters %}
		<li><a href="#Parameters">Parameters</a></li>
	{% endif %}
</ul></td>

<td><ul>
	{% if assignments %}
		<li><a href="#InitialAssignments">InitialAssignments</a></li>
	{% endif %}
	{% if rules %}
		<li><a href="#Rules">Rules</a></li>
	{% endif %}
	{% if constraints %}
		<li><a href="#Constraints">Constraints</a></li>
	{% endif %}
	{% if reactions %}	
		<li><a href="#Reactions">Reactions</a></li>
	{% endif %}
	{% if events %}
		<li><a href="#Events">Events</a></li>
	{% endif %}
</ul></td>

<td><img src="{% static 'sim/images/sbml.gif' %}" height=40 /></td>
</tr>
</table>
</div>

<div id="content">
<!-- model -->
<span id="Model">
	<table id="table_model">
    <caption>Model</caption>
    <thead>
        <tr>
            <th scope="col">id</th>
            <th scope="col">name</th>
            <th scope="col">SBML</th>
            <th scope="col">time</th>
            <th scope="col">substance</th>
            <th scope="col">volume</th>
            <th scope="col">area</th>
            <th scope="col">length</th>
        </tr>
    </thead>
    <tbody>
    	<td>{{model.getId}}</td>
		<td>{{model.getName}}</td>
		<td>L{{model.getLevel}}V{{model.getVersion}}</td>
		<td>{{model.getTimeUnits}}</td>
		<td>{{model.getSubstanceUnits}}</td>
		<td>{{model.getVolumeUnits}}</td>
		<td>{{model.getAreaUnits}}</td>
		<td>{{model.getLengthUnits}}</td>
	</tbody>
	</table>
	{{model.getNotesString}}
	<pre>{{model.getAnnotationString}}</pre>
</span>

<!-- FunctionDefinitions -->
{% if functions %}
<span id="FunctionDefinitions">
<h1>FunctionDefinitions [{{functions_size}}]</h1>
<table id="table_functions">
	<caption>FunctionDefinitions</caption>
    <thead>
        <tr>
            <th scope="col">id</th>
            <th scope="col">name</th>
            <th scope="col">math</th>
            <th scope="col">links</th>
            <th scope="col">sbo</th>
        </tr>
    </thead>
    <tbody>
    	{% for item in functions %}
    		<tr>
    			<td>{{item.getId}}</td>
				<td>{{item.getName}}</td>
				<td>{{item.getFormula}}</td>
				<td>$fac.getInfo($fd)</td>
				<td>{% if item.getSBOTerm != -1 %}{{item.getSBOTerm}}{% endif %}</td>
			</tr>
		{% endfor %}
	</tbody>
</table>
</span>
{% endif %}

<!-- UnitDefinition -->
{% if units %}
<span id="UnitDefinitions">
<h1>UnitDefinitions [{{ units_size }}] </h1>
<table id="table_units">
	<caption>UnitDefinitions</caption>
    <thead>
        <tr>
            <th scope="col">id</th>
            <th scope="col">name</th>
            <th scope="col">units</th>
            <th scope="col">links</th>
            <th scope="col">sbo</th>          
        </tr>
    </thead>
    <tbody>
    		{% for item in units %}
    		<tr>
    			<td>{{item.getId}}</td>
				<td>{{item.getName}}</td>
				<td>
				{{ item|UnitDefinition_printUnits }}	
				</td>
				<td>$fac.getInfo($ud)</td>
				<td>{% if item.getSBOTerm != -1 %}{{item.getSBOTerm}}{% endif %}</td>
			</tr>
			{% endfor %}
	</tbody>
</table>
</span>
{% endif %}

<!-- Compartments -->
{% if compartments %}
<span id="Compartments">
<h1>Compartments [{{compartments_size}}]</h1>
<table id="table_compartments">
	<caption>Compartments</caption>
    <thead>
        <tr>
            <th scope="col">id</th>
            <th scope="col">name</th>
            <th scope="col">size</th>
            <th scope="col">constant</th>
            <th scope="col">spatialDimensions</th>
            <th scope="col">unit</th>
            <th scope="col">links</th>
            <th scope="col">sbo</th>
            <th scope="col">annotation</th>
        </tr>
    </thead>
    <tbody>
    	{% for item in compartments %}
    		<tr>
    			<td>{{item.getId}}</td>
				<td>{{item.getName}}</td>
				<td class="
					{% if item.isSetSize %}TRUE{% else %}FALSE{% endif %}
					">{{item.getSize}}</td>
				<td class="
					{% if item.isConstant %}TRUE{% else %}FALSE{% endif %}
					">{{item.getConstant}}</td>	
				<td>{{item.getSpatialDimensions}}</td>
				<td>{{item.getUnits}}</td>
				<td>$fac.getInfo($comp)</td>
				<td>{% if item.getSBOTerm != -1 %}{{item.getSBOTerm}}{% endif %}</td>
				<td><pre>{{item.getAnnotationString}}</pre></td>
			</tr>
		{% endfor %}
	</tbody>
</table>
</span>
{% endif %}

<!-- Species -->
{% if species %}
<span id="Species">
<h1>Species [{{species_size}}]</h1>
<table id="table_species">
	<caption>Species</caption>
    <thead>
        <tr>
            <th scope="col">id</th>
            <th scope="col">name</th>
            <th scope="col">compartment</th>
            <th scope="col">boundaryCondition</th>
            <th scope="col">constant</th>
            <th scope="col">initialAmount</th>
            <th scope="col">initialConcentration</th>
            <th scope="col">substanceUnits</th>
            <th scope="col">hasOnlySubstanceUnits</th>
            <th scope="col">links</th>
            <th scope="col">sbo</th>
        </tr>
    </thead>
    <tbody>
    	{% for item in species %}
    		<tr>
    			<td>{{item.getId}}</td>
				<td>{{item.getName}}</td>
				<td>{{item.getCompartment}}</td>
				<td class="
					{% if item.getBoundaryCondition %} TRUE {% else %}  FALSE  {% endif %}
					">{{item.getBoundaryCondition}}</td>
				<td class="
					{% if item.getConstant %} TRUE  {% else %}  FALSE  {% endif %}
					">{{ item.getConstant }}</td>	
				<td>{% if item.isSetInitialAmount %} {{item.getInitialAmount}} {% endif %}</td>
				<td> {% if item.isSetInitialConcentration %} {{item.getInitialConcentration}} {% endif %} </td>
				<td>{{ item.getSubstanceUnits }}</td>
				<td class="
					{% if item.hasOnlySubstanceUnits %} TRUE {% else %} FALSE {% endif %}
					">{{item.hasOnlySubstanceUnits}}</td>
				<td>$fac.getInfo($s)</td>
				<td>{% if item.getSBOTerm != -1 %}{{item.getSBOTerm}}{% endif %}</td>
			</tr>
		{% endfor %}
	</tbody>
</table>
</span>
{% endif %}

<!-- Parameters -->
{% if parameters %}
<span id="Parameters">
<h1>Parameters [{{parameters_size}}]</h1>
<table id="table_parameters">
	<caption>Parameters</caption>
    <thead>
        <tr>
            <th scope="col">id</th>
            <th scope="col">name</th>
            <th scope="col">value</th>
            <th scope="col">unit</th>
            <th scope="col">constant</th>
            <th scope="col">links</th>
            <th scope="col">sbo</th>
            <th scope="col">annotation</th>
        </tr>
    </thead>
    <tbody>
    	{% for item in parameters %}
    		<tr>
    			<td>{{item.getId}}</td>
    			<td>{{item.getName}}</td>
    			{% if not item.isSetValue %} <td class="FALSE">{% else %}<td>{% endif %}{{item.getValue}}</td>
				<td>{{item.getUnits}}</td>
				<td class="
					{% if item.getConstant %} TRUE {% else %} FALSE {% endif %}
					">{{item.getConstant}}</td>
				<td>$fac.getInfo($p)</td>
				<td>{% if item.getSBOTerm != -1 %}{{item.getSBOTerm}}{% endif %}</td>					
				<td><pre>{{item.getAnnotationString}}</pre></td>
			</tr>
		{% endfor %}
	</tbody>
</table>
</span>
{% endif %}

<!-- InitialAssignments -->
{% if assignments %}
<span id="InitialAssignments">
<h1>InitialAssignments [{{assignments_size}}]</h1>
<table id="table_assignments">
	<caption>InitialAssignments</caption>
    <thead>
        <tr>
            <th scope="col">symbol</th>
            <th scope="col">&nbsp;</th>
            <th scope="col">assignment</th>
            <th scope="col">derived units</th>
            <th scope="col">links</th>
            <th scope="col">sbo</th>
        </tr>
    </thead>
    <tbody>
    {% for item in assignments %}
    		<tr>
    			<td>{{item.getId}}</td>
    			<td>=</td>
    			<td>{{ item.getMath|SBML_formulaToString }}</td>
    			<td>{{item.getDerivedUnitDefinition}}</td>
				<td>$fac.getInfo($ia)</td>
				<td>{% if item.getSBOTerm != -1 %}{{item.getSBOTerm}}{% endif %}</td>	
			</tr>
	 {% endfor %}
	</tbody>
</table>
</span>
{% endif %}

<!-- Rules -->
{% if rules %}
<span id="Rules">
<h1>Rules [{{ rules_size }}]</h1>
<table id="table_rules">
	<caption>Rules</caption>
    <thead>
        <tr>
            <th scope="col">variable</th>
            <th scope="col">&nbsp;</th>
            <th scope="col">assignment</th>
            <th scope="col">links</th>
            <th scope="col">sbo</th>
        </tr>
    </thead>
    <tbody>
    	{% for item in rules %}
    		<tr>
    			<td>{{item.getId}}</td>
    			<td>=</td>
    			<td>{{item.getMath|SBML_formulaToString}}</td>
    			<td>$fac.getInfo($r)</td>
				<td>{% if item.getSBOTerm != -1 %}{{item.getSBOTerm}}{% endif %}</td>		
			</tr>
		{% endfor %}
	</tbody>
</table>
</span>
{% endif %}

<!-- Constraints -->
{% if constraints %}
<span id="Constraints">
<h1>Constraints [{{constraints_size}}]</h1>
<table id="table_constraints">
	<caption>Constraints</caption>
    <thead>
        <tr>
            <th scope="col">id</th>
            <th scope="col">constraint</th>
            <th scope="col">links</th>
            <th scope="col">sbo</th>
        </tr>
    </thead>
    <tbody>
    	{% for item in constraints %}
    		<tr>
    			<td>{{item.getId}}</td>
    			<td>{{item.getMath|SBML_formulaToString}}</td>
     			<td>$fac.getInfo($c)</td>
				<td>{% if item.getSBOTerm != -1 %}{{item.getSBOTerm}}{% endif %}</td>			
			</tr>
		{% endfor %}
	</tbody>
</table>
</span>
{% endif %}

<!-- Reactions -->
{% if reactions %}
<span id="Reactions">
<h1>Reactions [{{reactions_size}}]</h1>
<table id="table_reactions">
    <caption>Reactions</caption>
    <thead>
        <tr>
            <th scope="col">id</th>
            <th scope="col">name</th>
            <th scope="col">reversible</th>
            <th scope="col">equation</th>
            <th scope="col">modifiers</th>
            <th scope="col">derived units</th>
            <th scope="col">formula</th>
            <th scope="col">links</th>
            <th scope="col">sbo</th>
        </tr>
    </thead>
    <tbody>
    	{% for item in reactions %}
    		<tr>
    			<td>{{item.getId}}</td>
				<td>{{item.getName}}</td>
				<td class="
					{% if item.getReversible %} TRUE  {% else %}  FALSE  {% endif %}
					">{{ item.getReversible }}</td>
				<td>#eq.toHTMLString()</td>
				<td>{% for mod in item.getListOfModifiers %}
						{{mod}}<br />
					{% endfor %}
				</td>
				<td>{{item.getDerivedUnitDefinition}}</td>
				<td>{{item.getKineticLaw.getMath|SBML_formulaToString}}</td>
     			<td>$fac.getInfo($r)</td>
				<td>{% if item.getSBOTerm != -1 %}{{item.getSBOTerm}}{% endif %}</td>	
			</tr>
		{% endfor %}
	</tbody>
</table>
</span>
{% endif %}

<!-- Events -->
{% if events %}
<span id="Events">
<h1>Events [{{events_size}}]</h1>
<table id="table_events">
	<caption>Events</caption>
    <thead>
        <tr>
            <th scope="col">id</th>
            <th scope="col">name</th>
            <th scope="col">trigger</th>
            <th scope="col">priority</th>
            <th scope="col">delay</th>
            <th scope="col">assignments</th>
            <th scope="col">links</th>
            <th scope="col">sbo</th>
        </tr>
    </thead>
    <tbody>
    	{% for item in events %}
    		<tr>
    			<td>{{item.getVariable}}</td>
    			<td>{{item.getName}}</td>
    			<td>
    				{{item.getTrigger.getMath|SBML_formulaToString}}<br />
    				initialValue = {{item.getTrigger.getInitialValue}}<br />
    				persistent = {{item.getTrigger.getPersistent}}<br />
    			</td>
    			<td>{{item.getPriority}}</td>
    			<td>{{item.getDelay}}</td>
    			<td>{% for eva in item.getListOfEventAssignments %}
    					{{eva.getId}} = {{eva.getMath|SBML_formulaToString}}<br />
    				{% endfor %}
    			</td>
    			<td>$fac.getInfo($ev)</td>
				<td>{% if item.getSBOTerm != -1 %}{{item.getSBOTerm}}{% endif %}</td>
			</tr>
		{% endfor %}
	</tbody>
</table>
</span>
{% endif %}

<br />
SBMLReport: <a href="http://www.charite.de/sysbio/people/koenig/" target="_blank">Matthias K&ouml;nig</a> (matthias.koenig[at]charite.de)
</div>

</body>
</html>